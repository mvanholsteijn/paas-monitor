<!doctype html>
<html ng-app>
	<head>
		<title>Hello PaaS!</title>

		<script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.16/angular.min.js"></script>
		<script src="monitor-controller.js"></script>
		<link rel="stylesheet" type="text/css" href="style.css">
	</head>

	<body>
		<div ng-controller="MonitorController">
		   <table>
			<tr>
			    <th>host</th>
			    <th>release</th>
			    <th>message</th>
			    <th># of calls</th>
			    <th>avg response time</th>
			    <th>last response time</th>
			</tr>
			<tr ng-repeat="response in responses">
			    <td>{{response.key}}</td>
			    <td>{{response.release}}</td>
			    <td>{{response.message}}</td>
			    <td>{{stats[response.key].count}}</td>
			    <td>{{stats[response.key].avg}}</td>
			    <td>{{stats[response.key].last}}</td>
			</tr>
                    </table>
		    <p>
			Number of errors: {{error_count}}, last status {{last_status}}
		    </p>
		    <button type="button" data-ng-click="startMonitor()">start monitor</button>
		    <button type="button" data-ng-click="stopMonitor()">stop monitor</button>    
		    <button type="button" data-ng-click="callService()">call service</button>    
		    <button type="button" data-ng-click="toggleHealth()">make unhealthy</button>
		    <button type="button" data-ng-click="stopService()">stop service</button>
		</div>
	</body>
</html>
